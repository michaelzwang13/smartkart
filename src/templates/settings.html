<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - Preppr</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Base CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />

    <style>
      .settings-container {
        position: relative;
        z-index: 1;
        max-width: 800px;
        margin: 0 auto;
      }

      .settings-header {
        text-align: center;
        margin-bottom: var(--spacing-2xl);
      }

      .settings-icon {
        width: 80px;
        height: 80px;
        background: var(--primary-gradient);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto var(--spacing-lg);
        color: var(--text-white);
        font-size: 2rem;
      }

      .settings-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: var(--spacing-sm);
      }

      .settings-subtitle {
        color: var(--text-secondary);
        font-size: 1.125rem;
      }

      /* Settings Cards */
      .settings-card {
        background: var(--bg-primary);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        border: 1px solid var(--border-light);
        margin-bottom: var(--spacing-xl);
        overflow: hidden;
        animation: fadeInUp 0.8s ease;
      }

      .card-header {
        padding: var(--spacing-xl);
        border-bottom: 1px solid var(--border-light);
        background: linear-gradient(
          135deg,
          var(--bg-secondary) 0%,
          var(--bg-tertiary) 100%
        );
      }

      .card-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--spacing-xs);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .card-description {
        color: var(--text-secondary);
        font-size: 0.95rem;
      }

      .card-body {
        padding: var(--spacing-xl);
      }

      /* Form Styles */
      .form-group {
        margin-bottom: var(--spacing-lg);
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg);
      }

      .form-label {
        display: block;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--spacing-sm);
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .form-input-container {
        position: relative;
      }

      .form-input {
        width: 100%;
        padding: var(--spacing-md) var(--spacing-md) var(--spacing-md) 3rem;
        border: 2px solid var(--border-light);
        border-radius: var(--radius-lg);
        font-size: 1rem;
        font-family: var(--font-family);
        transition: all 0.3s ease;
        background: var(--bg-primary);
      }

      .form-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
      }

      .form-input-icon {
        position: absolute;
        left: var(--spacing-md);
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-muted);
        font-size: 1.125rem;
        transition: color 0.3s ease;
      }

      .form-input:focus + .form-input-icon {
        color: var(--primary-color);
      }

      /* Success/Error Messages */
      .message {
        padding: var(--spacing-md);
        border-radius: var(--radius-lg);
        margin-bottom: var(--spacing-lg);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .message.success {
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        border: 1px solid #6ee7b7;
        color: var(--success-color);
      }

      .message.error {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        border: 1px solid #fca5a5;
        color: var(--error-color);
      }

      /* Buttons */
      .btn {
        padding: var(--spacing-md) var(--spacing-xl);
        border: none;
        border-radius: var(--radius-lg);
        font-family: var(--font-family);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
        font-size: 1rem;
        position: relative;
        overflow: hidden;
      }

      .btn-primary {
        background: var(--primary-gradient);
        color: var(--text-white);
        box-shadow: var(--shadow-md);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .btn-secondary {
        background: var(--bg-primary);
        color: var(--text-primary);
        border: 2px solid var(--border-medium);
      }

      .btn-secondary:hover {
        background: var(--bg-secondary);
        border-color: var(--primary-color);
      }

      .btn-actions {
        display: flex;
        gap: var(--spacing-md);
        justify-content: flex-end;
        margin-top: var(--spacing-xl);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-links {
          display: none;
        }

        .main-content {
          padding: 120px var(--spacing-md) var(--spacing-lg);
        }

        .settings-card {
          margin-bottom: var(--spacing-lg);
        }

        .card-header,
        .card-body {
          padding: var(--spacing-lg);
        }

        .settings-title {
          font-size: 2rem;
        }

        .form-row {
          grid-template-columns: 1fr;
          gap: var(--spacing-md);
        }

        .btn-actions {
          flex-direction: column;
        }
      }

      /* Focus styles for accessibility */
      .btn:focus,
      .nav-link:focus,
      .form-input:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }
    </style>
  </head>
  <body class="font-sans text-slate-800 leading-relaxed bg-slate-50">
    <div
      class="page-wrapper"
      style="min-height: 100vh; display: flex; flex-direction: column"
    >
      <!-- Header -->
      <header class="header">
        <div class="nav-container">
          <a href="{{ url_for('shopping.home') }}" class="logo">
            <img
              src="{{ url_for('static', filename='images/preppr-logo.png') }}"
              alt="Preppr Logo"
              style="width: 40px; height: 40px; border-radius: var(--radius-lg)"
            />
            Preppr
          </a>

          <nav>
            <ul class="nav-links">
              <li>
                <a href="{{ url_for('shopping.home') }}" class="nav-link"
                  >Home</a
                >
              </li>
              <li>
                <a href="{{ url_for('auth.logout') }}" class="nav-link"
                  >Logout</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content" style="flex: 1">
        <div class="settings-container">
          <div class="settings-header">
            <div class="settings-icon">
              <i class="fas fa-cog" aria-hidden="true"></i>
            </div>
            <h1 class="settings-title">Account Settings</h1>
          </div>

          {% if success %}
          <div class="message success">
            <i class="fas fa-check-circle" aria-hidden="true"></i>
            {{ success }}
          </div>
          {% endif %} {% if error %}
          <div class="message error">
            <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
            {{ error }}
          </div>
          {% endif %}

          <!-- Personal Information -->
          <div class="settings-card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-user" aria-hidden="true"></i>
                Personal Information
              </h2>
              <p class="card-description">
                Update your name and contact information
              </p>
            </div>
            <div class="card-body">
              <form
                action="{{ url_for('auth.settings') }}"
                method="POST"
                id="personalInfoForm"
              >
                <input type="hidden" name="form_type" value="personal_info" />

                <div class="form-row">
                  <div class="form-group">
                    <label for="first_name" class="form-label"
                      >First Name</label
                    >
                    <div class="form-input-container">
                      <input
                        type="text"
                        id="first_name"
                        name="first_name"
                        class="form-input"
                        value="{{ user.first_name or '' }}"
                        placeholder="Enter your first name"
                        required
                        autocomplete="given-name"
                      />
                      <i
                        class="fas fa-user form-input-icon"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="last_name" class="form-label">Last Name</label>
                    <div class="form-input-container">
                      <input
                        type="text"
                        id="last_name"
                        name="last_name"
                        class="form-input"
                        value="{{ user.last_name or '' }}"
                        placeholder="Enter your last name"
                        required
                        autocomplete="family-name"
                      />
                      <i
                        class="fas fa-user form-input-icon"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="email" class="form-label">Email Address</label>
                  <div class="form-input-container">
                    <input
                      type="email"
                      id="email"
                      name="email"
                      class="form-input"
                      value="{{ user.email }}"
                      placeholder="Enter your email address"
                      required
                      autocomplete="email"
                    />
                    <i
                      class="fas fa-envelope form-input-icon"
                      aria-hidden="true"
                    ></i>
                  </div>
                </div>

                <div class="form-group">
                  <label for="timezone" class="form-label">Timezone</label>
                  <div class="form-input-container">
                    <select
                      id="timezone"
                      name="timezone"
                      class="form-input"
                      required
                    >
                      <option value="">Select your timezone...</option>
                      <!-- North America -->
                      <optgroup label="North America">
                        <option value="America/New_York" {{ 'selected' if user.timezone == 'America/New_York' else '' }}>Eastern Time (New York)</option>
                        <option value="America/Chicago" {{ 'selected' if user.timezone == 'America/Chicago' else '' }}>Central Time (Chicago)</option>
                        <option value="America/Denver" {{ 'selected' if user.timezone == 'America/Denver' else '' }}>Mountain Time (Denver)</option>
                        <option value="America/Los_Angeles" {{ 'selected' if user.timezone == 'America/Los_Angeles' else '' }}>Pacific Time (Los Angeles)</option>
                        <option value="America/Anchorage" {{ 'selected' if user.timezone == 'America/Anchorage' else '' }}>Alaska Time (Anchorage)</option>
                        <option value="Pacific/Honolulu" {{ 'selected' if user.timezone == 'Pacific/Honolulu' else '' }}>Hawaii Time (Honolulu)</option>
                        <option value="America/Toronto" {{ 'selected' if user.timezone == 'America/Toronto' else '' }}>Eastern Time (Toronto)</option>
                        <option value="America/Vancouver" {{ 'selected' if user.timezone == 'America/Vancouver' else '' }}>Pacific Time (Vancouver)</option>
                      </optgroup>
                      <!-- Europe -->
                      <optgroup label="Europe">
                        <option value="Europe/London" {{ 'selected' if user.timezone == 'Europe/London' else '' }}>Greenwich Mean Time (London)</option>
                        <option value="Europe/Paris" {{ 'selected' if user.timezone == 'Europe/Paris' else '' }}>Central European Time (Paris)</option>
                        <option value="Europe/Berlin" {{ 'selected' if user.timezone == 'Europe/Berlin' else '' }}>Central European Time (Berlin)</option>
                        <option value="Europe/Rome" {{ 'selected' if user.timezone == 'Europe/Rome' else '' }}>Central European Time (Rome)</option>
                        <option value="Europe/Madrid" {{ 'selected' if user.timezone == 'Europe/Madrid' else '' }}>Central European Time (Madrid)</option>
                        <option value="Europe/Amsterdam" {{ 'selected' if user.timezone == 'Europe/Amsterdam' else '' }}>Central European Time (Amsterdam)</option>
                        <option value="Europe/Stockholm" {{ 'selected' if user.timezone == 'Europe/Stockholm' else '' }}>Central European Time (Stockholm)</option>
                        <option value="Europe/Moscow" {{ 'selected' if user.timezone == 'Europe/Moscow' else '' }}>Moscow Time (Moscow)</option>
                      </optgroup>
                      <!-- Asia -->
                      <optgroup label="Asia">
                        <option value="Asia/Tokyo" {{ 'selected' if user.timezone == 'Asia/Tokyo' else '' }}>Japan Standard Time (Tokyo)</option>
                        <option value="Asia/Shanghai" {{ 'selected' if user.timezone == 'Asia/Shanghai' else '' }}>China Standard Time (Shanghai)</option>
                        <option value="Asia/Seoul" {{ 'selected' if user.timezone == 'Asia/Seoul' else '' }}>Korea Standard Time (Seoul)</option>
                        <option value="Asia/Hong_Kong" {{ 'selected' if user.timezone == 'Asia/Hong_Kong' else '' }}>Hong Kong Time (Hong Kong)</option>
                        <option value="Asia/Singapore" {{ 'selected' if user.timezone == 'Asia/Singapore' else '' }}>Singapore Standard Time (Singapore)</option>
                        <option value="Asia/Dubai" {{ 'selected' if user.timezone == 'Asia/Dubai' else '' }}>Gulf Standard Time (Dubai)</option>
                        <option value="Asia/Kolkata" {{ 'selected' if user.timezone == 'Asia/Kolkata' else '' }}>India Standard Time (Mumbai)</option>
                        <option value="Asia/Bangkok" {{ 'selected' if user.timezone == 'Asia/Bangkok' else '' }}>Indochina Time (Bangkok)</option>
                      </optgroup>
                      <!-- Australia & Oceania -->
                      <optgroup label="Australia & Oceania">
                        <option value="Australia/Sydney" {{ 'selected' if user.timezone == 'Australia/Sydney' else '' }}>Australian Eastern Time (Sydney)</option>
                        <option value="Australia/Melbourne" {{ 'selected' if user.timezone == 'Australia/Melbourne' else '' }}>Australian Eastern Time (Melbourne)</option>
                        <option value="Australia/Perth" {{ 'selected' if user.timezone == 'Australia/Perth' else '' }}>Australian Western Time (Perth)</option>
                        <option value="Pacific/Auckland" {{ 'selected' if user.timezone == 'Pacific/Auckland' else '' }}>New Zealand Standard Time (Auckland)</option>
                      </optgroup>
                      <!-- Other -->
                      <optgroup label="Other">
                        <option value="UTC" {{ 'selected' if user.timezone == 'UTC' or not user.timezone else '' }}>Coordinated Universal Time (UTC)</option>
                      </optgroup>
                    </select>
                    <i
                      class="fas fa-globe-americas form-input-icon"
                      aria-hidden="true"
                    ></i>
                  </div>
                </div>

                <div class="btn-actions">
                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save" aria-hidden="true"></i>
                    Save Changes
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Account Settings -->
          <div class="settings-card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-user-cog" aria-hidden="true"></i>
                Account Settings
              </h2>
              <p class="card-description">Change your username and password</p>
            </div>
            <div class="card-body">
              <form
                action="{{ url_for('auth.settings') }}"
                method="POST"
                id="accountForm"
              >
                <input
                  type="hidden"
                  name="form_type"
                  value="account_settings"
                />

                <div class="form-group">
                  <label for="username" class="form-label">Username</label>
                  <div class="form-input-container">
                    <input
                      type="text"
                      id="username"
                      name="username"
                      class="form-input"
                      value="{{ user.user_ID }}"
                      placeholder="Choose a username"
                      required
                      autocomplete="username"
                      minlength="3"
                    />
                    <i
                      class="fas fa-user form-input-icon"
                      aria-hidden="true"
                    ></i>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="current_password" class="form-label"
                      >Current Password</label
                    >
                    <div class="form-input-container">
                      <input
                        type="password"
                        id="current_password"
                        name="current_password"
                        class="form-input"
                        placeholder="Enter current password"
                        autocomplete="current-password"
                      />
                      <i
                        class="fas fa-lock form-input-icon"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="new_password" class="form-label"
                      >New Password</label
                    >
                    <div class="form-input-container">
                      <input
                        type="password"
                        id="new_password"
                        name="new_password"
                        class="form-input"
                        placeholder="Enter new password"
                        autocomplete="new-password"
                        minlength="6"
                      />
                      <i
                        class="fas fa-lock form-input-icon"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                </div>

                <div class="btn-actions">
                  <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save" aria-hidden="true"></i>
                    Update Account
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <p>
          &copy; 2025 Preppr. All rights reserved. Prep smarter. Save time. Eat
          better.
        </p>
      </footer>
    </div>
  </body>

  <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
</html>
