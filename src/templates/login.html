<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - Preppr</title>
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        // Navigation Component (simplified for login)
        const Navigation = () => {
          const handleLogoClick = (e) => {
            e.preventDefault();
            window.location.href = '/';
          };

          return React.createElement('nav', { className: 'navigation' },
            React.createElement('div', { className: 'container' },
              React.createElement('div', { className: 'nav-container' },
                // Logo
                React.createElement('a', { 
                  href: '#', 
                  className: 'logo',
                  onClick: handleLogoClick
                },
                  React.createElement('div', { className: 'logo-icon' }, 'P'),
                  React.createElement('span', { className: 'logo-text' }, 'Preppr')
                ),
                
                // Sign up link
                React.createElement('div', { className: 'nav-buttons desktop' },
                  React.createElement('a', { href: '/register', className: 'btn btn-primary' }, 'Sign Up')
                )
              )
            )
          );
        };

        // Login Form Component
        const LoginForm = () => {
          const [formData, setFormData] = useState({
            user_ID: '',
            password: ''
          });
          const [isSubmitting, setIsSubmitting] = useState(false);

          const handleInputChange = (e) => {
            const { name, value } = e.target;
            setFormData(prev => ({
              ...prev,
              [name]: value
            }));
          };

          const handleSubmit = async (e) => {
            e.preventDefault();
            setIsSubmitting(true);
            
            // Submit form normally to Flask backend
            e.target.submit();
          };

          return React.createElement('section', { className: 'login-section' },
            React.createElement('div', { className: 'login-bg-decorations' }),
            React.createElement('div', { className: 'container' },
              React.createElement('div', { className: 'login-content' },
                React.createElement('div', { className: 'login-card' },
                  React.createElement('div', { className: 'login-header' },
                    React.createElement('h1', { className: 'login-title' },
                      'Welcome back'
                    ),
                    React.createElement('p', { className: 'login-description' },
                      'Sign in to your Preppr account to continue your meal planning journey.'
                    )
                  ),

                  // Error message if exists
                  {% if error %}
                  React.createElement('div', { className: 'error-message' },
                    React.createElement('span', { className: 'icon icon-x' }),
                    '{{ error }}'
                  ),
                  {% endif %}

                  React.createElement('form', { 
                    action: '{{ url_for("auth.login") }}', 
                    method: 'POST',
                    onSubmit: handleSubmit
                  },
                    React.createElement('div', { className: 'form-group' },
                      React.createElement('label', { 
                        htmlFor: 'user_ID', 
                        className: 'form-label' 
                      }, 'Username'),
                      React.createElement('input', {
                        type: 'text',
                        id: 'user_ID',
                        name: 'user_ID',
                        className: 'form-input',
                        placeholder: 'Enter your username',
                        value: formData.user_ID,
                        onChange: handleInputChange,
                        required: true,
                        autoComplete: 'username'
                      })
                    ),

                    React.createElement('div', { className: 'form-group' },
                      React.createElement('label', { 
                        htmlFor: 'password', 
                        className: 'form-label' 
                      }, 'Password'),
                      React.createElement('input', {
                        type: 'password',
                        id: 'password',
                        name: 'password',
                        className: 'form-input',
                        placeholder: 'Enter your password',
                        value: formData.password,
                        onChange: handleInputChange,
                        required: true,
                        autoComplete: 'current-password'
                      })
                    ),

                    React.createElement('button', { 
                      type: 'submit', 
                      className: 'btn btn-primary btn-login',
                      disabled: isSubmitting
                    },
                      isSubmitting ? 'Signing in...' : 'Sign In',
                      React.createElement('span', { className: 'icon icon-arrow-right' })
                    )
                  ),

                  React.createElement('div', { className: 'login-footer' },
                    React.createElement('p', null,
                      'Don\'t have an account? ',
                      React.createElement('a', { 
                        href: '/register', 
                        className: 'login-link' 
                      }, 'Sign up here')
                    )
                  )
                )
              )
            )
          );
        };

        // Main App Component
        const App = () => {
          return React.createElement('div', { className: 'min-h-screen' },
            React.createElement(Navigation),
            React.createElement('main', null,
              React.createElement(LoginForm)
            )
          );
        };

        // Render the app
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>